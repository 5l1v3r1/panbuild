app-id: net.louib.panbuild
runtime: org.gnome.Platform
runtime-version: "3.36"
sdk: org.gnome.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.rust-stable
build-options:
  append-path: "/usr/lib/sdk/rust-stable/bin:~/.cargo/bin"
  build-args:
    - "--share=network"
  env:
    RUSTFLAGS: "--remap-path-prefix =../"
# command: panbuild
tags: []
cleanup: []
modules:
  -
    name: PyYAML
    buildsystem: simple
    build-commands:
      - pip3 install --prefix=/app --no-deps .
    sources:
      - type: archive
        url: https://files.pythonhosted.org/packages/64/c2/b80047c7ac2478f9501676c988a5411ed5572f35d1beff9cae07d321512c/PyYAML-5.3.1.tar.gz
        sha256: b8eac752c5e14d3eca0e6dd9199cd627518cb5ec06add0de9d32baeee6fe645d
  -
    name: flatpak-shared-modules
    buildsystem: simple
    build-commands:
      - echo "Not installing shared modules just yet."
    sources:
      - type: git
        url: https://github.com/flathub/shared-modules.git
        branch: master
  -
    name: panbuild
    buildsystem: simple
    build-commands:
      - mkdir -p /app/bin
      - cargo install --path .
    sources:
      - type: git
        url: https://github.com/louib/panbuild.git
        branch: master
